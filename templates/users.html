{% extends "template.html" %}
{% block head %}
	<script src="{{ proxyprefix.rstrip('/') + static_url("js/users.js") }}"
		type="text/javascript"></script>
{% end %}
{% block title %}
	- Users
{% end %}
{% block content %}
<div id="usersAndInvites">
  <table id="currentUsers">
    <tr>
	<th class="collabel" data-type="str" data-fieldname="email">
	    EMail Address</th>
	<th class="collabel" data-type="str" data-fieldname="admin">
	    Admin
	</th>
	<th class="actioncol">
	    Actions
	</th>
    </tr>
    {% for user in users %}
      <tr class="user" data-id="{{ user['id'] }}">
	<td class="email">
	  <input type="text" data-colname="Email" class="userfield"
		 value="{{ user['email'] }}"/>
	</td>
	<td>
	  <input type="checkbox" class="adminflag userfield"
		 id="adminflag-{{ user['id'] }}"
		 data-colname="Admin" {% if user['admin'] %}checked{% end %} />
	  <label for="adminflag-{{ user['id'] }}">Admin</label>
	</td>
	<td class="actions">
	    <input type="button" class="actionbutton resetpwdbutton"
		   id="resetuserpwd-{{ user['id'] }}" value="Reset Pwd" />
	    <input type="button" class="actionbutton deluserbutton"
		   id="deleteuser-{{ user['id'] }}" value="Delete" />
	</td>
    </tr>
    {% end %}
    <tr>
	<td colspan="3" class="adduser">
	    <input type="button" class="adduserbutton" value="Add user..."
		   id="adduser"/>
	</td>
    </tr>
  </table>
  {% if len(invites) > 0 %}
    <br><hr><br>
    <table id="pendingInvites">
      <tr>
        <th colspan="3" class="collabel">Pending Invites</th>
      </tr>
      <tr>
        <th class="collabel"> EMail Address </th>
        <th class="collabel"> Expires </th>
	<th class="actioncol"> Actions </th>
      </tr>
      {% for invite in invites %}
        <tr class="invite" data-id="{{ invite['id'] }}">
          <td class="email"> {{ invite['email'] }} </td>
          <td class="expires"> {{ invite['expires'] }} </td>
          <td class="actions">
	    <input type="button" id="dropinvite-{{ invite['id'] }}"
		   class="actionbutton dropinvite"
                   value="Drop invite" />
        </tr>
      {% end %}
    </table>
  {% end %}
</div>
{% end %}
